var m=Object.defineProperty;var v=(s,e,t)=>e in s?m(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var o=(s,e,t)=>(v(s,typeof e!="symbol"?e+"":e,t),t);import{P as f}from"./app-52847285.js";class F{constructor(){o(this,"_vueModal",null);o(this,"_calendar",[]);o(this,"_resourceFunc",(e,t,r)=>{var n="#card-calendar";$.when().then(()=>{FormCom.loadingForCardOn(n);var a=FormCom.getFormArrayData(n),l=Object.assign(a,{}),d=UrlCom.getFuncUrl()+"/get_booth";return axios.post(d,l)}).then(a=>{t(a.data),FormCom.loadingForCardOff(n)}).fail(AjaxCom.fail)});o(this,"_eventFunc",(e,t,r,n)=>{var a="#card-calendar";$.when().then(()=>{FormCom.loadingForCardOn(a);var l=FormCom.getFormArrayData(a),d=Object.assign(l,{start:t.start.valueOf(),end:t.end.valueOf(),day:e}),c=UrlCom.getFuncUrl()+"/get_calendar";return axios.post(c,d)}).then(l=>{r(l.data),FormCom.loadingForCardOff(a)}).fail(AjaxCom.fail)});o(this,"_eventClick",e=>{e.event._def.resourceIds[0]!=="000"&&(this._vueModal.item=Object.assign({id:e.event._def.publicId},e.event.extendedProps),this._vueModal.show())});o(this,"_selectFunc",e=>{var t="#card-calendar",r=FormCom.getFormArrayData(t);if(e.resource._resource.id!=="000"){var n=moment(e.start).format("d")==0?7:moment(e.start).format("d"),a=UrlCom.getFuncUrl()+"/new/"+r.campus_cd+"/"+n+moment(e.start).format("HHmm")+"/"+e.resource._resource.id;location.href=a}});o(this,"_topLinkButtonClick",e=>{location.href="#top"});const e=new f;this._vueModal=e.getVueApp({useShowEvent:!1})}createWeek(){for(var e=new Date("2000/01/02"),t=1;t<=7;t++){e.setDate(e.getDate()+1);const r=this.create(t,e);this._calendar.push(r)}}create(e,t){var r="calendar"+e,n=FullCalendar.Calendar,a=document.getElementById(r);const l=this;var d=new n(a,{schedulerLicenseKey:"0477382314-fcs-1699842877",initialView:"resourceTimeGridDay",initialDate:t,customButtons:{topLinkButton:{text:"上部に戻る",click:this._topLinkButtonClick}},headerToolbar:{left:"",center:"title",right:"topLinkButton"},titleFormat:function(c){const i=c.date.marker.getDay();return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i]},locale:"ja",contentHeight:"auto",stickyFooterScrollbar:!0,stickyHeaderDates:!0,dayMinWidth:150,selectable:!1,selectMirror:!1,navLinks:!0,resources:this._resourceFunc,events:function(c,i,u){l._eventFunc(e,c,i,u)},eventClick:this._eventClick,selectable:!0,select:this._selectFunc,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1},slotMinTime:"08:00:00",slotMaxTime:"23:00:00",allDaySlot:!1,slotDuration:"00:15:00",slotLabelFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1},eventContent:function(c){return{html:c.event.title}},eventTextColor:"white"});return d.render(),d}refetchEvents(){for(var e=0;e<7;e++)this._calendar[e].refetchResources(),this._calendar[e].refetchEvents()}}export{F as default};
