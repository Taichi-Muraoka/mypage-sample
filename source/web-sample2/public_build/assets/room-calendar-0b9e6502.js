var v=Object.defineProperty;var h=(c,e,t)=>e in c?v(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var o=(c,e,t)=>(h(c,typeof e!="symbol"?e+"":e,t),t);import{P as f}from"./app-7a404423.js";class D{constructor(){o(this,"_vueModal",null);o(this,"_calendar",null);o(this,"_dateChangeFunc",e=>{$("#target_date").val(moment(e.start).format("YYYY-MM-DD"))});o(this,"_resourceFunc",(e,t,l)=>{var a="#card-calendar";$.when().then(()=>{FormCom.loadingForCardOn(a);var r=FormCom.getFormArrayData(a),n=Object.assign(r,{}),i=UrlCom.getFuncUrl()+"/get_booth";return axios.post(i,n)}).then(r=>{t(r.data),FormCom.loadingForCardOff(a)}).fail(AjaxCom.fail)});o(this,"_eventFunc",(e,t,l)=>{var a="#card-calendar";$.when().then(()=>{FormCom.loadingForCardOn(a),$("#target_date").val(moment(e.start.valueOf()).format("YYYY-MM-DD"));var r=FormCom.getFormArrayData(a),n=Object.assign(r,{start:e.start.valueOf(),end:e.end.valueOf()}),i=UrlCom.getFuncUrl()+"/get_calendar";return axios.post(i,n)}).then(r=>{t(r.data),FormCom.loadingForCardOff(a)}).fail(AjaxCom.fail)});o(this,"_eventClick",e=>{e.event._def.resourceIds[0]!=="000"&&(this._vueModal.item=Object.assign({id:e.event._def.publicId,title:e.event._def.title},e.event.extendedProps),this._vueModal.show())});o(this,"_selectFunc",e=>{var t="#card-calendar",l=FormCom.getFormArrayData(t);if(e.resource._resource.id!=="000"&&e.resource._resource.id!=="999"){var a=UrlCom.getFuncUrl()+"/new/"+l.campus_cd+"/"+moment(e.start).format("YYYYMMDD")+moment(e.start).format("HHmm")+"/"+e.resource._resource.id;location.href=a}});o(this,"_datePickerButtonClick",e=>{const t=e.target,l=this;$(t).daterangepicker({singleDatePicker:!0,locale:{format:"YYYY/MM/DD",applyLabel:"適用",cancelLabel:"キャンセル"},startDate:this._calendar.getDate(),minYear:new Date().getFullYear()-2,maxYear:new Date().getFullYear()+5,drops:"auto"}).on("apply.daterangepicker",function(a,r){var n=moment(r.startDate).format();l._calendar.gotoDate(n)}).on("cancel.daterangepicker",function(a,r){$(this).val("")}),$(t).data("daterangepicker").show()});const e=new f;this._vueModal=e.getVueApp({useShowEvent:!1})}create(e){var t;ValueCom.isEmpty(e)||(t=new Date(e));var l="calendar",a=FullCalendar.Calendar,r=document.getElementById(l);this._calendar=new a(r,{schedulerLicenseKey:"0477382314-fcs-1699842877",initialView:"resourceTimeGridDay",datesSet:this._dateChangeFunc,initialDate:t,customButtons:{datePickerButton:{text:"日付選択",click:this._datePickerButtonClick}},headerToolbar:{left:"prev,next today",center:"title",right:"datePickerButton"},buttonText:{today:"今日",month:"月",week:"週",day:"日"},titleFormat:function(n){const i=n.date.year,s=n.date.month+1,d=n.date.day,u=n.date.marker.getDay(),m=["(日)","(月)","(火)","(水)","(木)","(金)","(土)"][u];return i+"年"+s+"月"+d+"日 "+m},locale:"ja",contentHeight:"auto",stickyFooterScrollbar:!0,stickyHeaderDates:!0,dayMinWidth:150,selectable:!1,selectMirror:!1,navLinks:!0,resources:this._resourceFunc,events:this._eventFunc,eventClick:this._eventClick,selectable:!0,select:this._selectFunc,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1},slotMinTime:"08:00:00",slotMaxTime:"23:00:00",allDaySlot:!1,slotDuration:"00:15:00",slotLabelFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1},eventContent:function(n){return{html:n.event.title}},eventTextColor:"white"}),this._calendar.render()}refetchEvents(){this._calendar.refetchResources(),this._calendar.refetchEvents()}}export{D as default};
